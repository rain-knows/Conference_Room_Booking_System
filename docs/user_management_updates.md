# 用户管理界面更新说明

## 概述
本次更新对用户管理界面进行了重大改进，使其符合新的角色列表系统，并增加了用户状态管理功能。

## 主要修改内容

### 1. 角色系统更新
- **旧角色**: `user`, `admin`
- **新角色**: 
  - `NORMAL_EMPLOYEE` (普通员工)
  - `LEADER` (领导)
  - `SYSTEM_ADMIN` (系统管理员)

### 2. User类更新
- 添加了 `active` 字段，用于标识用户账户是否激活
- 新增构造函数：`User(int userId, String username, String role, String email, String phone, boolean active)`
- 添加了 `isActive()` 方法
- 添加了 `setActive(boolean active)` 方法
- 新增角色检查方法：
  - `isSystemAdmin()` - 检查是否为系统管理员
  - `isLeader()` - 检查是否为领导
  - `isNormalEmployee()` - 检查是否为普通员工
- 更新了 `isAdmin()` 方法，现在只检查 `SYSTEM_ADMIN` 角色

### 3. UserDAO类更新
- 更新了 `checkLogin()` 方法，只允许激活状态的用户登录
- 更新了 `getAllUsers()` 方法，包含 `active` 字段
- 更新了 `addUser()` 方法，支持设置用户激活状态
- 更新了 `updateUserByAdmin()` 方法，支持更新用户激活状态
- 新增了 `toggleUserStatus()` 方法，用于切换用户激活状态

### 4. AdminUserManagementPanel类更新
- 表格增加了"状态"列，显示用户是否激活
- 角色选择下拉框改为显示中文名称：
  - 普通员工
  - 领导
  - 系统管理员
- 新增"启用/禁用"按钮，用于快速切换用户状态
- 编辑对话框中增加了状态复选框
- 添加了角色显示名称和角色代码的转换方法

### 5. 其他相关更新
- 更新了 `UserProfilePanel` 中的User构造函数调用
- 更新了 `MainPage` 中的测试User构造函数调用

## 数据库要求
确保数据库中的 `user` 表包含以下字段：
- `active` BOOLEAN NOT NULL DEFAULT TRUE

## 功能特性

### 用户状态管理
- 管理员可以启用/禁用用户账户
- 被禁用的用户无法登录系统
- 用户列表中显示账户状态

### 角色管理
- 支持三种用户角色：普通员工、领导、系统管理员
- 角色在界面上显示为中文名称，数据库中存储为英文代码
- 不同角色拥有不同的系统权限

### 界面改进
- 更直观的角色选择
- 用户状态可视化
- 快速状态切换功能
- 更好的用户体验

## 使用说明

### 添加新用户
1. 点击"添加用户"按钮
2. 填写用户信息（用户名、邮箱、电话）
3. 选择用户角色
4. 设置初始密码
5. 选择是否激活账户
6. 点击"保存"

### 编辑用户
1. 在用户列表中选择要编辑的用户
2. 点击"编辑用户"按钮
3. 修改用户信息
4. 点击"保存"

### 管理用户状态
1. 在用户列表中选择用户
2. 点击"启用/禁用"按钮
3. 确认操作

### 重置密码
1. 在用户列表中选择用户
2. 点击"重置密码"按钮
3. 确认操作（默认密码为 "password123"）

## 注意事项
- 只有系统管理员可以访问用户管理功能
- 被禁用的用户无法登录系统
- 删除用户前请确保该用户没有关联的预订记录
- 角色更改可能影响用户的系统权限 